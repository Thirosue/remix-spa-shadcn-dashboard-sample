/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}var N;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(N||(N={}));const bt="popstate";function ln(e){e===void 0&&(e={});function t(r,a){let{pathname:d,search:l,hash:f}=r.location;return Ne("",{pathname:d,search:l,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Be(a)}return dr(t,n,null,e)}function T(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sr(){return Math.random().toString(36).substr(2,8)}function wt(e,t){return{usr:e.state,key:e.key,idx:t}}function Ne(e,t,n,r){return n===void 0&&(n=null),A({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ye(t):t,{state:n,key:t&&t.key||r||sr()})}function Be(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ye(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function dr(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:d=!1}=r,l=a.history,f=N.Pop,c=null,b=p();b==null&&(b=0,l.replaceState(A({},l.state,{idx:b}),""));function p(){return(l.state||{idx:null}).idx}function y(){f=N.Pop;let M=p(),j=M==null?null:M-b;b=M,c&&c({action:f,location:R.location,delta:j})}function m(M,j){f=N.Push;let z=Ne(R.location,M,j);b=p()+1;let Y=wt(z,b),le=R.createHref(z);try{l.pushState(Y,"",le)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;a.location.assign(le)}d&&c&&c({action:f,location:R.location,delta:1})}function _(M,j){f=N.Replace;let z=Ne(R.location,M,j);b=p();let Y=wt(z,b),le=R.createHref(z);l.replaceState(Y,"",le),d&&c&&c({action:f,location:R.location,delta:0})}function x(M){let j=a.location.origin!=="null"?a.location.origin:a.location.href,z=typeof M=="string"?M:Be(M);return z=z.replace(/ $/,"%20"),T(j,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,j)}let R={get action(){return f},get location(){return e(a,l)},listen(M){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(bt,y),c=M,()=>{a.removeEventListener(bt,y),c=null}},createHref(M){return t(a,M)},createURL:x,encodeLocation(M){let j=x(M);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:_,go(M){return l.go(M)}};return R}var U;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(U||(U={}));const ur=new Set(["lazy","caseSensitive","path","id","index","children"]);function fr(e){return e.index===!0}function rt(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((a,d)=>{let l=[...n,d],f=typeof a.id=="string"?a.id:l.join("-");if(T(a.index!==!0||!a.children,"Cannot specify children on an index route"),T(!r[f],'Found a route id collision on id "'+f+`".  Route id's must be globally unique within Data Router usages`),fr(a)){let c=A({},a,t(a),{id:f});return r[f]=c,c}else{let c=A({},a,t(a),{id:f,children:void 0});return r[f]=c,a.children&&(c.children=rt(a.children,t,l,r)),c}})}function Ie(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ye(t):t,a=Ge(r.pathname||"/",n);if(a==null)return null;let d=It(e);hr(d);let l=null;for(let f=0;l==null&&f<d.length;++f){let c=Pr(a);l=Rr(d[f],c)}return l}function cr(e,t){let{route:n,pathname:r,params:a}=e;return{id:n.id,pathname:r,params:a,data:t[n.id],handle:n.handle}}function It(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(d,l,f)=>{let c={relativePath:f===void 0?d.path||"":f,caseSensitive:d.caseSensitive===!0,childrenIndex:l,route:d};c.relativePath.startsWith("/")&&(T(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let b=Oe([r,c.relativePath]),p=n.concat(c);d.children&&d.children.length>0&&(T(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),It(d.children,t,p,b)),!(d.path==null&&!d.index)&&t.push({path:b,score:wr(b,d.index),routesMeta:p})};return e.forEach((d,l)=>{var f;if(d.path===""||!((f=d.path)!=null&&f.includes("?")))a(d,l);else for(let c of Ot(d.path))a(d,l,c)}),t}function Ot(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),d=n.replace(/\?$/,"");if(r.length===0)return a?[d,""]:[d];let l=Ot(r.join("/")),f=[];return f.push(...l.map(c=>c===""?d:[d,c].join("/"))),a&&f.push(...l),f.map(c=>e.startsWith("/")&&c===""?"/":c)}function hr(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Sr(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pr=/^:[\w-]+$/,mr=3,gr=2,yr=1,vr=10,br=-2,St=e=>e==="*";function wr(e,t){let n=e.split("/"),r=n.length;return n.some(St)&&(r+=br),t&&(r+=gr),n.filter(a=>!St(a)).reduce((a,d)=>a+(pr.test(d)?mr:d===""?yr:vr),r)}function Sr(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Rr(e,t){let{routesMeta:n}=e,r={},a="/",d=[];for(let l=0;l<n.length;++l){let f=n[l],c=l===n.length-1,b=a==="/"?t:t.slice(a.length)||"/",p=Dr({path:f.relativePath,caseSensitive:f.caseSensitive,end:c},b);if(!p)return null;Object.assign(r,p.params);let y=f.route;d.push({params:r,pathname:Oe([a,p.pathname]),pathnameBase:jr(Oe([a,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(a=Oe([a,p.pathnameBase]))}return d}function Dr(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Er(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let d=a[0],l=d.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((b,p,y)=>{let{paramName:m,isOptional:_}=p;if(m==="*"){let R=f[y]||"";l=d.slice(0,d.length-R.length).replace(/(.)\/+$/,"$1")}const x=f[y];return _&&!x?b[m]=void 0:b[m]=(x||"").replace(/%2F/g,"/"),b},{}),pathname:d,pathnameBase:l,pattern:e}}function Er(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Pe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,c)=>(r.push({paramName:f,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function Pr(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Pe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ge(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function xr(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?ye(e):e;return{pathname:n?n.startsWith("/")?n:Lr(n,t):t,search:_r(r),hash:Fr(a)}}function Lr(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Ze(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Mr(e,t){let n=zt(e);return t?n.map((r,a)=>a===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tr(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=ye(e):(a=A({},e),T(!a.pathname||!a.pathname.includes("?"),Ze("?","pathname","search",a)),T(!a.pathname||!a.pathname.includes("#"),Ze("#","pathname","hash",a)),T(!a.search||!a.search.includes("#"),Ze("#","search","hash",a)));let d=e===""||a.pathname==="",l=d?"/":a.pathname,f;if(l==null)f=n;else{let y=t.length-1;if(!r&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),y-=1;a.pathname=m.join("/")}f=y>=0?t[y]:"/"}let c=xr(a,f),b=l&&l!=="/"&&l.endsWith("/"),p=(d||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(b||p)&&(c.pathname+="/"),c}const Oe=e=>e.join("/").replace(/\/\/+/g,"/"),jr=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_r=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Fr=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Rt extends Error{}class Cr{constructor(t,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],T(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((d,l)=>r=l),this.controller=new AbortController;let a=()=>r(new Rt("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",a),this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((d,l)=>{let[f,c]=l;return Object.assign(d,{[f]:this.trackPromise(f,c)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(t,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let r=Promise.race([n,this.abortPromise]).then(a=>this.onSettle(r,t,void 0,a),a=>this.onSettle(r,t,a));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,a){if(this.controller.signal.aborted&&r instanceof Rt)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);if(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r===void 0&&a===void 0){let d=new Error('Deferred data for key "'+n+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>d}),this.emit(!1,n),Promise.reject(d)}return a===void 0?(Object.defineProperty(t,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>a}),this.emit(!1,n),a)}emit(t,n){this.subscribers.forEach(r=>r(t,n))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(a=>{this.subscribe(d=>{t.removeEventListener("abort",r),(d||this.done)&&a(d)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return T(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,a]=n;return Object.assign(t,{[r]:Ur(a)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function Ar(e){return e instanceof Promise&&e._tracked===!0}function Ur(e){if(!Ar(e))return e;if(e._error)throw e._error;return e._data}const sn=function(t,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n;return new Cr(t,r)},dn=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let a=new Headers(r.headers);return a.set("Location",t),new Response(null,A({},r,{headers:a}))};class Nt{constructor(t,n,r,a){a===void 0&&(a=!1),this.status=t,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Bt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ht=["post","put","patch","delete"],Ir=new Set(Ht),Or=["get",...Ht],zr=new Set(Or),Nr=new Set([301,302,303,307,308]),Br=new Set([307,308]),et={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hr={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ae={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ot=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),Kt="remix-router-transitions";function un(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;T(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(e.mapRouteProperties)a=e.mapRouteProperties;else if(e.detectErrorBoundary){let i=e.detectErrorBoundary;a=o=>({hasErrorBoundary:i(o)})}else a=Kr;let d={},l=rt(e.routes,a,void 0,d),f,c=e.basename||"/",b=e.unstable_dataStrategy||Vr,p=A({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),y=null,m=new Set,_=null,x=null,R=null,M=e.hydrationData!=null,j=Ie(l,e.history.location,c),z=null;if(j==null){let i=Q(404,{pathname:e.history.location.pathname}),{matches:o,route:s}=Ft(l);j=o,z={[s.id]:i}}let Y,le=j.some(i=>i.route.lazy),te=j.some(i=>i.route.loader);if(le)Y=!1;else if(!te)Y=!0;else if(p.v7_partialHydration){let i=e.hydrationData?e.hydrationData.loaderData:null,o=e.hydrationData?e.hydrationData.errors:null,s=h=>h.route.loader?typeof h.route.loader=="function"&&h.route.loader.hydrate===!0?!1:i&&i[h.route.id]!==void 0||o&&o[h.route.id]!==void 0:!0;if(o){let h=j.findIndex(g=>o[g.route.id]!==void 0);Y=j.slice(0,h+1).every(s)}else Y=j.every(s)}else Y=e.hydrationData!=null;let ve,u={historyAction:e.history.action,location:e.history.location,matches:j,initialized:Y,navigation:et,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||z,fetchers:new Map,blockers:new Map},k=N.Pop,I=!1,F,V=!1,J=new Map,ne=null,X=!1,ae=!1,He=[],Ke=[],O=new Map,We=0,xe=-1,be=new Map,ie=new Set,we=new Map,Le=new Map,oe=new Set,ce=new Map,he=new Map,Xe=!1;function Yt(){if(y=e.history.listen(i=>{let{action:o,location:s,delta:h}=i;if(Xe){Xe=!1;return}Pe(he.size===0||h!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let g=mt({currentLocation:u.location,nextLocation:s,historyAction:o});if(g&&h!=null){Xe=!0,e.history.go(h*-1),ke(g,{state:"blocked",location:s,proceed(){ke(g,{state:"proceeding",proceed:void 0,reset:void 0,location:s}),e.history.go(h)},reset(){let E=new Map(u.blockers);E.set(g,Ae),G({blockers:E})}});return}return pe(o,s)}),n){an(t,J);let i=()=>on(t,J);t.addEventListener("pagehide",i),ne=()=>t.removeEventListener("pagehide",i)}return u.initialized||pe(N.Pop,u.location,{initialHydration:!0}),ve}function Jt(){y&&y(),ne&&ne(),m.clear(),F&&F.abort(),u.fetchers.forEach((i,o)=>$e(o)),u.blockers.forEach((i,o)=>pt(o))}function Gt(i){return m.add(i),()=>m.delete(i)}function G(i,o){o===void 0&&(o={}),u=A({},u,i);let s=[],h=[];p.v7_fetcherPersist&&u.fetchers.forEach((g,E)=>{g.state==="idle"&&(oe.has(E)?h.push(E):s.push(E))}),[...m].forEach(g=>g(u,{deletedFetchers:h,unstable_viewTransitionOpts:o.viewTransitionOpts,unstable_flushSync:o.flushSync===!0})),p.v7_fetcherPersist&&(s.forEach(g=>u.fetchers.delete(g)),h.forEach(g=>$e(g)))}function Me(i,o,s){var h,g;let{flushSync:E}=s===void 0?{}:s,w=u.actionData!=null&&u.navigation.formMethod!=null&&ee(u.navigation.formMethod)&&u.navigation.state==="loading"&&((h=i.state)==null?void 0:h._isRedirect)!==!0,v;o.actionData?Object.keys(o.actionData).length>0?v=o.actionData:v=null:w?v=u.actionData:v=null;let P=o.loaderData?jt(u.loaderData,o.loaderData,o.matches||[],o.errors):u.loaderData,D=u.blockers;D.size>0&&(D=new Map(D),D.forEach((S,C)=>D.set(C,Ae)));let H=I===!0||u.navigation.formMethod!=null&&ee(u.navigation.formMethod)&&((g=i.state)==null?void 0:g._isRedirect)!==!0;f&&(l=f,f=void 0),X||k===N.Pop||(k===N.Push?e.history.push(i,i.state):k===N.Replace&&e.history.replace(i,i.state));let K;if(k===N.Pop){let S=J.get(u.location.pathname);S&&S.has(i.pathname)?K={currentLocation:u.location,nextLocation:i}:J.has(i.pathname)&&(K={currentLocation:i,nextLocation:u.location})}else if(V){let S=J.get(u.location.pathname);S?S.add(i.pathname):(S=new Set([i.pathname]),J.set(u.location.pathname,S)),K={currentLocation:u.location,nextLocation:i}}G(A({},o,{actionData:v,loaderData:P,historyAction:k,location:i,initialized:!0,navigation:et,revalidation:"idle",restoreScrollPosition:yt(i,o.matches||u.matches),preventScrollReset:H,blockers:D}),{viewTransitionOpts:K,flushSync:E===!0}),k=N.Pop,I=!1,V=!1,X=!1,ae=!1,He=[],Ke=[]}async function st(i,o){if(typeof i=="number"){e.history.go(i);return}let s=nt(u.location,u.matches,c,p.v7_prependBasename,i,p.v7_relativeSplatPath,o==null?void 0:o.fromRouteId,o==null?void 0:o.relative),{path:h,submission:g,error:E}=Dt(p.v7_normalizeFormMethod,!1,s,o),w=u.location,v=Ne(u.location,h,o&&o.state);v=A({},v,e.history.encodeLocation(v));let P=o&&o.replace!=null?o.replace:void 0,D=N.Push;P===!0?D=N.Replace:P===!1||g!=null&&ee(g.formMethod)&&g.formAction===u.location.pathname+u.location.search&&(D=N.Replace);let H=o&&"preventScrollReset"in o?o.preventScrollReset===!0:void 0,K=(o&&o.unstable_flushSync)===!0,S=mt({currentLocation:w,nextLocation:v,historyAction:D});if(S){ke(S,{state:"blocked",location:v,proceed(){ke(S,{state:"proceeding",proceed:void 0,reset:void 0,location:v}),st(i,o)},reset(){let C=new Map(u.blockers);C.set(S,Ae),G({blockers:C})}});return}return await pe(D,v,{submission:g,pendingError:E,preventScrollReset:H,replace:o&&o.replace,enableViewTransition:o&&o.unstable_viewTransition,flushSync:K})}function Xt(){if(qe(),G({revalidation:"loading"}),u.navigation.state!=="submitting"){if(u.navigation.state==="idle"){pe(u.historyAction,u.location,{startUninterruptedRevalidation:!0});return}pe(k||u.historyAction,u.navigation.location,{overrideNavigation:u.navigation})}}async function pe(i,o,s){F&&F.abort(),F=null,k=i,X=(s&&s.startUninterruptedRevalidation)===!0,ir(u.location,u.matches),I=(s&&s.preventScrollReset)===!0,V=(s&&s.enableViewTransition)===!0;let h=f||l,g=s&&s.overrideNavigation,E=Ie(h,o,c),w=(s&&s.flushSync)===!0;if(!E){let S=Q(404,{pathname:o.pathname}),{matches:C,route:B}=Ft(h);Qe(),Me(o,{matches:C,loaderData:{},errors:{[B.id]:S}},{flushSync:w});return}if(u.initialized&&!ae&&Qr(u.location,o)&&!(s&&s.submission&&ee(s.submission.formMethod))){Me(o,{matches:E},{flushSync:w});return}F=new AbortController;let v=Ee(e.history,o,F.signal,s&&s.submission),P;if(s&&s.pendingError)P=[ze(E).route.id,{type:U.error,error:s.pendingError}];else if(s&&s.submission&&ee(s.submission.formMethod)){let S=await qt(v,o,s.submission,E,{replace:s.replace,flushSync:w});if(S.shortCircuited)return;P=S.pendingActionResult,g=tt(o,s.submission),w=!1,v=Ee(e.history,v.url,v.signal)}let{shortCircuited:D,loaderData:H,errors:K}=await Qt(v,o,E,g,s&&s.submission,s&&s.fetcherSubmission,s&&s.replace,s&&s.initialHydration===!0,w,P);D||(F=null,Me(o,A({matches:E},_t(P),{loaderData:H,errors:K})))}async function qt(i,o,s,h,g){g===void 0&&(g={}),qe();let E=rn(o,s);G({navigation:E},{flushSync:g.flushSync===!0});let w,v=it(h,o);if(!v.route.action&&!v.route.lazy)w={type:U.error,error:Q(405,{method:i.method,pathname:o.pathname,routeId:v.route.id})};else if(w=(await je("action",i,[v],h))[0],i.signal.aborted)return{shortCircuited:!0};if(ge(w)){let P;return g&&g.replace!=null?P=g.replace:P=Lt(w.response.headers.get("Location"),new URL(i.url),c)===u.location.pathname+u.location.search,await Te(i,w,{submission:s,replace:P}),{shortCircuited:!0}}if(me(w))throw Q(400,{type:"defer-action"});if(Z(w)){let P=ze(h,v.route.id);return(g&&g.replace)!==!0&&(k=N.Push),{pendingActionResult:[P.route.id,w]}}return{pendingActionResult:[v.route.id,w]}}async function Qt(i,o,s,h,g,E,w,v,P,D){let H=h||tt(o,g),K=g||E||Ut(H),S=f||l,[C,B]=Et(e.history,u,s,K,o,p.v7_partialHydration&&v===!0,p.unstable_skipActionErrorRevalidation,ae,He,Ke,oe,we,ie,S,c,D);if(Qe(L=>!(s&&s.some($=>$.route.id===L))||C&&C.some($=>$.route.id===L)),xe=++We,C.length===0&&B.length===0){let L=ct();return Me(o,A({matches:s,loaderData:{},errors:D&&Z(D[1])?{[D[0]]:D[1].error}:null},_t(D),L?{fetchers:new Map(u.fetchers)}:{}),{flushSync:P}),{shortCircuited:!0}}if(!X&&(!p.v7_partialHydration||!v)){B.forEach($=>{let q=u.fetchers.get($.key),W=Ue(void 0,q?q.data:void 0);u.fetchers.set($.key,W)});let L;D&&!Z(D[1])?L={[D[0]]:D[1].data}:u.actionData&&(Object.keys(u.actionData).length===0?L=null:L=u.actionData),G(A({navigation:H},L!==void 0?{actionData:L}:{},B.length>0?{fetchers:new Map(u.fetchers)}:{}),{flushSync:P})}B.forEach(L=>{O.has(L.key)&&de(L.key),L.controller&&O.set(L.key,L.controller)});let Fe=()=>B.forEach(L=>de(L.key));F&&F.signal.addEventListener("abort",Fe);let{loaderResults:ue,fetcherResults:Se}=await dt(u.matches,s,C,B,i);if(i.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",Fe),B.forEach(L=>O.delete(L.key));let Re=Ct([...ue,...Se]);if(Re){if(Re.idx>=C.length){let L=B[Re.idx-C.length].key;ie.add(L)}return await Te(i,Re.result,{replace:w}),{shortCircuited:!0}}let{loaderData:De,errors:re}=Tt(u,s,C,ue,D,B,Se,ce);ce.forEach((L,$)=>{L.subscribe(q=>{(q||L.done)&&ce.delete($)})}),p.v7_partialHydration&&v&&u.errors&&Object.entries(u.errors).filter(L=>{let[$]=L;return!C.some(q=>q.route.id===$)}).forEach(L=>{let[$,q]=L;re=Object.assign(re||{},{[$]:q})});let Ve=ct(),Ye=ht(xe),Je=Ve||Ye||B.length>0;return A({loaderData:De,errors:re},Je?{fetchers:new Map(u.fetchers)}:{})}function Zt(i,o,s,h){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");O.has(i)&&de(i);let g=(h&&h.unstable_flushSync)===!0,E=f||l,w=nt(u.location,u.matches,c,p.v7_prependBasename,s,p.v7_relativeSplatPath,o,h==null?void 0:h.relative),v=Ie(E,w,c);if(!v){_e(i,o,Q(404,{pathname:w}),{flushSync:g});return}let{path:P,submission:D,error:H}=Dt(p.v7_normalizeFormMethod,!0,w,h);if(H){_e(i,o,H,{flushSync:g});return}let K=it(v,P);if(I=(h&&h.preventScrollReset)===!0,D&&ee(D.formMethod)){er(i,o,P,K,v,g,D);return}we.set(i,{routeId:o,path:P}),tr(i,o,P,K,v,g,D)}async function er(i,o,s,h,g,E,w){if(qe(),we.delete(i),!h.route.action&&!h.route.lazy){let W=Q(405,{method:w.formMethod,pathname:s,routeId:o});_e(i,o,W,{flushSync:E});return}let v=u.fetchers.get(i);se(i,nn(w,v),{flushSync:E});let P=new AbortController,D=Ee(e.history,s,P.signal,w);O.set(i,P);let H=We,S=(await je("action",D,[h],g))[0];if(D.signal.aborted){O.get(i)===P&&O.delete(i);return}if(p.v7_fetcherPersist&&oe.has(i)){if(ge(S)||Z(S)){se(i,fe(void 0));return}}else{if(ge(S))if(O.delete(i),xe>H){se(i,fe(void 0));return}else return ie.add(i),se(i,Ue(w)),Te(D,S,{fetcherSubmission:w});if(Z(S)){_e(i,o,S.error);return}}if(me(S))throw Q(400,{type:"defer-action"});let C=u.navigation.location||u.location,B=Ee(e.history,C,P.signal),Fe=f||l,ue=u.navigation.state!=="idle"?Ie(Fe,u.navigation.location,c):u.matches;T(ue,"Didn't find any matches after fetcher action");let Se=++We;be.set(i,Se);let Re=Ue(w,S.data);u.fetchers.set(i,Re);let[De,re]=Et(e.history,u,ue,w,C,!1,p.unstable_skipActionErrorRevalidation,ae,He,Ke,oe,we,ie,Fe,c,[h.route.id,S]);re.filter(W=>W.key!==i).forEach(W=>{let Ce=W.key,vt=u.fetchers.get(Ce),lr=Ue(void 0,vt?vt.data:void 0);u.fetchers.set(Ce,lr),O.has(Ce)&&de(Ce),W.controller&&O.set(Ce,W.controller)}),G({fetchers:new Map(u.fetchers)});let Ve=()=>re.forEach(W=>de(W.key));P.signal.addEventListener("abort",Ve);let{loaderResults:Ye,fetcherResults:Je}=await dt(u.matches,ue,De,re,B);if(P.signal.aborted)return;P.signal.removeEventListener("abort",Ve),be.delete(i),O.delete(i),re.forEach(W=>O.delete(W.key));let L=Ct([...Ye,...Je]);if(L){if(L.idx>=De.length){let W=re[L.idx-De.length].key;ie.add(W)}return Te(B,L.result)}let{loaderData:$,errors:q}=Tt(u,u.matches,De,Ye,void 0,re,Je,ce);if(u.fetchers.has(i)){let W=fe(S.data);u.fetchers.set(i,W)}ht(Se),u.navigation.state==="loading"&&Se>xe?(T(k,"Expected pending action"),F&&F.abort(),Me(u.navigation.location,{matches:ue,loaderData:$,errors:q,fetchers:new Map(u.fetchers)})):(G({errors:q,loaderData:jt(u.loaderData,$,ue,q),fetchers:new Map(u.fetchers)}),ae=!1)}async function tr(i,o,s,h,g,E,w){let v=u.fetchers.get(i);se(i,Ue(w,v?v.data:void 0),{flushSync:E});let P=new AbortController,D=Ee(e.history,s,P.signal);O.set(i,P);let H=We,S=(await je("loader",D,[h],g))[0];if(me(S)&&(S=await Vt(S,D.signal,!0)||S),O.get(i)===P&&O.delete(i),!D.signal.aborted){if(oe.has(i)){se(i,fe(void 0));return}if(ge(S))if(xe>H){se(i,fe(void 0));return}else{ie.add(i),await Te(D,S);return}if(Z(S)){_e(i,o,S.error);return}T(!me(S),"Unhandled fetcher deferred data"),se(i,fe(S.data))}}async function Te(i,o,s){let{submission:h,fetcherSubmission:g,replace:E}=s===void 0?{}:s;o.response.headers.has("X-Remix-Revalidate")&&(ae=!0);let w=o.response.headers.get("Location");T(w,"Expected a Location header on the redirect Response"),w=Lt(w,new URL(i.url),c);let v=Ne(u.location,w,{_isRedirect:!0});if(n){let C=!1;if(o.response.headers.has("X-Remix-Reload-Document"))C=!0;else if(ot.test(w)){const B=e.history.createURL(w);C=B.origin!==t.location.origin||Ge(B.pathname,c)==null}if(C){E?t.location.replace(w):t.location.assign(w);return}}F=null;let P=E===!0?N.Replace:N.Push,{formMethod:D,formAction:H,formEncType:K}=u.navigation;!h&&!g&&D&&H&&K&&(h=Ut(u.navigation));let S=h||g;if(Br.has(o.response.status)&&S&&ee(S.formMethod))await pe(P,v,{submission:A({},S,{formAction:w}),preventScrollReset:I});else{let C=tt(v,h);await pe(P,v,{overrideNavigation:C,fetcherSubmission:g,preventScrollReset:I})}}async function je(i,o,s,h){try{let g=await Yr(b,i,o,s,h,d,a);return await Promise.all(g.map((E,w)=>{if(Zr(E)){let v=E.result;return{type:U.redirect,response:Xr(v,o,s[w].route.id,h,c,p.v7_relativeSplatPath)}}return Gr(E)}))}catch(g){return s.map(()=>({type:U.error,error:g}))}}async function dt(i,o,s,h,g){let[E,...w]=await Promise.all([s.length?je("loader",g,s,o):[],...h.map(v=>{if(v.matches&&v.match&&v.controller){let P=Ee(e.history,v.path,v.controller.signal);return je("loader",P,[v.match],v.matches).then(D=>D[0])}else return Promise.resolve({type:U.error,error:Q(404,{pathname:v.path})})})]);return await Promise.all([At(i,s,E,E.map(()=>g.signal),!1,u.loaderData),At(i,h.map(v=>v.match),w,h.map(v=>v.controller?v.controller.signal:null),!0)]),{loaderResults:E,fetcherResults:w}}function qe(){ae=!0,He.push(...Qe()),we.forEach((i,o)=>{O.has(o)&&(Ke.push(o),de(o))})}function se(i,o,s){s===void 0&&(s={}),u.fetchers.set(i,o),G({fetchers:new Map(u.fetchers)},{flushSync:(s&&s.flushSync)===!0})}function _e(i,o,s,h){h===void 0&&(h={});let g=ze(u.matches,o);$e(i),G({errors:{[g.route.id]:s},fetchers:new Map(u.fetchers)},{flushSync:(h&&h.flushSync)===!0})}function ut(i){return p.v7_fetcherPersist&&(Le.set(i,(Le.get(i)||0)+1),oe.has(i)&&oe.delete(i)),u.fetchers.get(i)||Hr}function $e(i){let o=u.fetchers.get(i);O.has(i)&&!(o&&o.state==="loading"&&be.has(i))&&de(i),we.delete(i),be.delete(i),ie.delete(i),oe.delete(i),u.fetchers.delete(i)}function rr(i){if(p.v7_fetcherPersist){let o=(Le.get(i)||0)-1;o<=0?(Le.delete(i),oe.add(i)):Le.set(i,o)}else $e(i);G({fetchers:new Map(u.fetchers)})}function de(i){let o=O.get(i);T(o,"Expected fetch controller: "+i),o.abort(),O.delete(i)}function ft(i){for(let o of i){let s=ut(o),h=fe(s.data);u.fetchers.set(o,h)}}function ct(){let i=[],o=!1;for(let s of ie){let h=u.fetchers.get(s);T(h,"Expected fetcher: "+s),h.state==="loading"&&(ie.delete(s),i.push(s),o=!0)}return ft(i),o}function ht(i){let o=[];for(let[s,h]of be)if(h<i){let g=u.fetchers.get(s);T(g,"Expected fetcher: "+s),g.state==="loading"&&(de(s),be.delete(s),o.push(s))}return ft(o),o.length>0}function nr(i,o){let s=u.blockers.get(i)||Ae;return he.get(i)!==o&&he.set(i,o),s}function pt(i){u.blockers.delete(i),he.delete(i)}function ke(i,o){let s=u.blockers.get(i)||Ae;T(s.state==="unblocked"&&o.state==="blocked"||s.state==="blocked"&&o.state==="blocked"||s.state==="blocked"&&o.state==="proceeding"||s.state==="blocked"&&o.state==="unblocked"||s.state==="proceeding"&&o.state==="unblocked","Invalid blocker state transition: "+s.state+" -> "+o.state);let h=new Map(u.blockers);h.set(i,o),G({blockers:h})}function mt(i){let{currentLocation:o,nextLocation:s,historyAction:h}=i;if(he.size===0)return;he.size>1&&Pe(!1,"A router only supports one blocker at a time");let g=Array.from(he.entries()),[E,w]=g[g.length-1],v=u.blockers.get(E);if(!(v&&v.state==="proceeding")&&w({currentLocation:o,nextLocation:s,historyAction:h}))return E}function Qe(i){let o=[];return ce.forEach((s,h)=>{(!i||i(h))&&(s.cancel(),o.push(h),ce.delete(h))}),o}function ar(i,o,s){if(_=i,R=o,x=s||null,!M&&u.navigation===et){M=!0;let h=yt(u.location,u.matches);h!=null&&G({restoreScrollPosition:h})}return()=>{_=null,R=null,x=null}}function gt(i,o){return x&&x(i,o.map(h=>cr(h,u.loaderData)))||i.key}function ir(i,o){if(_&&R){let s=gt(i,o);_[s]=R()}}function yt(i,o){if(_){let s=gt(i,o),h=_[s];if(typeof h=="number")return h}return null}function or(i){d={},f=rt(i,a,void 0,d)}return ve={get basename(){return c},get future(){return p},get state(){return u},get routes(){return l},get window(){return t},initialize:Yt,subscribe:Gt,enableScrollRestoration:ar,navigate:st,fetch:Zt,revalidate:Xt,createHref:i=>e.history.createHref(i),encodeLocation:i=>e.history.encodeLocation(i),getFetcher:ut,deleteFetcher:rr,dispose:Jt,getBlocker:nr,deleteBlocker:pt,_internalFetchControllers:O,_internalActiveDeferreds:ce,_internalSetRoutes:or},ve}function Wr(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function nt(e,t,n,r,a,d,l,f){let c,b;if(l){c=[];for(let y of t)if(c.push(y),y.route.id===l){b=y;break}}else c=t,b=t[t.length-1];let p=Tr(a||".",Mr(c,d),Ge(e.pathname,n)||e.pathname,f==="path");return a==null&&(p.search=e.search,p.hash=e.hash),(a==null||a===""||a===".")&&b&&b.route.index&&!lt(p.search)&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(p.pathname=p.pathname==="/"?n:Oe([n,p.pathname])),Be(p)}function Dt(e,t,n,r){if(!r||!Wr(r))return{path:n};if(r.formMethod&&!tn(r.formMethod))return{path:n,error:Q(405,{method:r.formMethod})};let a=()=>({path:n,error:Q(400,{type:"invalid-body"})}),d=r.formMethod||"get",l=e?d.toUpperCase():d.toLowerCase(),f=$t(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ee(l))return a();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,x)=>{let[R,M]=x;return""+_+R+"="+M+`
`},""):String(r.body);return{path:n,submission:{formMethod:l,formAction:f,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!ee(l))return a();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:f,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return a()}}}T(typeof FormData=="function","FormData is not available in this environment");let c,b;if(r.formData)c=at(r.formData),b=r.formData;else if(r.body instanceof FormData)c=at(r.body),b=r.body;else if(r.body instanceof URLSearchParams)c=r.body,b=Mt(c);else if(r.body==null)c=new URLSearchParams,b=new FormData;else try{c=new URLSearchParams(r.body),b=Mt(c)}catch{return a()}let p={formMethod:l,formAction:f,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:b,json:void 0,text:void 0};if(ee(p.formMethod))return{path:n,submission:p};let y=ye(n);return t&&y.search&&lt(y.search)&&c.append("index",""),y.search="?"+c,{path:Be(y),submission:p}}function $r(e,t){let n=e;if(t){let r=e.findIndex(a=>a.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function Et(e,t,n,r,a,d,l,f,c,b,p,y,m,_,x,R){let M=R?Z(R[1])?R[1].error:R[1].data:void 0,j=e.createURL(t.location),z=e.createURL(a),Y=R&&Z(R[1])?R[0]:void 0,le=Y?$r(n,Y):n,te=R?R[1].statusCode:void 0,ve=l&&te&&te>=400,u=le.filter((I,F)=>{let{route:V}=I;if(V.lazy)return!0;if(V.loader==null)return!1;if(d)return typeof V.loader!="function"||V.loader.hydrate?!0:t.loaderData[V.id]===void 0&&(!t.errors||t.errors[V.id]===void 0);if(kr(t.loaderData,t.matches[F],I)||c.some(X=>X===I.route.id))return!0;let J=t.matches[F],ne=I;return Pt(I,A({currentUrl:j,currentParams:J.params,nextUrl:z,nextParams:ne.params},r,{actionResult:M,unstable_actionStatus:te,defaultShouldRevalidate:ve?!1:f||j.pathname+j.search===z.pathname+z.search||j.search!==z.search||Wt(J,ne)}))}),k=[];return y.forEach((I,F)=>{if(d||!n.some(ae=>ae.route.id===I.routeId)||p.has(F))return;let V=Ie(_,I.path,x);if(!V){k.push({key:F,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let J=t.fetchers.get(F),ne=it(V,I.path),X=!1;m.has(F)?X=!1:b.includes(F)?X=!0:J&&J.state!=="idle"&&J.data===void 0?X=f:X=Pt(ne,A({currentUrl:j,currentParams:t.matches[t.matches.length-1].params,nextUrl:z,nextParams:n[n.length-1].params},r,{actionResult:M,unstable_actionStatus:te,defaultShouldRevalidate:ve?!1:f})),X&&k.push({key:F,routeId:I.routeId,path:I.path,matches:V,match:ne,controller:new AbortController})}),[u,k]}function kr(e,t,n){let r=!t||n.route.id!==t.route.id,a=e[n.route.id]===void 0;return r||a}function Wt(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Pt(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function xt(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let a=n[e.id];T(a,"No route found in manifest");let d={};for(let l in r){let c=a[l]!==void 0&&l!=="hasErrorBoundary";Pe(!c,'Route "'+a.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!c&&!ur.has(l)&&(d[l]=r[l])}Object.assign(a,d),Object.assign(a,A({},t(a),{lazy:void 0}))}function Vr(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function Yr(e,t,n,r,a,d,l,f){let c=r.reduce((y,m)=>y.add(m.route.id),new Set),b=new Set,p=await e({matches:a.map(y=>{let m=c.has(y.route.id);return A({},y,{shouldLoad:m,resolve:x=>(b.add(y.route.id),m?Jr(t,n,y,d,l,x,f):Promise.resolve({type:U.data,result:void 0}))})}),request:n,params:a[0].params,context:f});return a.forEach(y=>T(b.has(y.route.id),'`match.resolve()` was not called for route id "'+y.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),p.filter((y,m)=>c.has(a[m].route.id))}async function Jr(e,t,n,r,a,d,l){let f,c,b=p=>{let y,m=new Promise((R,M)=>y=M);c=()=>y(),t.signal.addEventListener("abort",c);let _=R=>typeof p!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):p({request:t,params:n.params,context:l},...R!==void 0?[R]:[]),x;return d?x=d(R=>_(R)):x=(async()=>{try{return{type:"data",result:await _()}}catch(R){return{type:"error",result:R}}})(),Promise.race([x,m])};try{let p=n.route[e];if(n.route.lazy)if(p){let y,[m]=await Promise.all([b(p).catch(_=>{y=_}),xt(n.route,a,r)]);if(y!==void 0)throw y;f=m}else if(await xt(n.route,a,r),p=n.route[e],p)f=await b(p);else if(e==="action"){let y=new URL(t.url),m=y.pathname+y.search;throw Q(405,{method:t.method,pathname:m,routeId:n.route.id})}else return{type:U.data,result:void 0};else if(p)f=await b(p);else{let y=new URL(t.url),m=y.pathname+y.search;throw Q(404,{pathname:m})}T(f.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(p){return{type:U.error,result:p}}finally{c&&t.signal.removeEventListener("abort",c)}return f}async function Gr(e){let{result:t,type:n,status:r}=e;if(kt(t)){let l;try{let f=t.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?t.body==null?l=null:l=await t.json():l=await t.text()}catch(f){return{type:U.error,error:f}}return n===U.error?{type:U.error,error:new Nt(t.status,t.statusText,l),statusCode:t.status,headers:t.headers}:{type:U.data,data:l,statusCode:t.status,headers:t.headers}}if(n===U.error)return{type:U.error,error:t,statusCode:Bt(t)?t.status:r};if(en(t)){var a,d;return{type:U.deferred,deferredData:t,statusCode:(a=t.init)==null?void 0:a.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}return{type:U.data,data:t,statusCode:r}}function Xr(e,t,n,r,a,d){let l=e.headers.get("Location");if(T(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!ot.test(l)){let f=r.slice(0,r.findIndex(c=>c.route.id===n)+1);l=nt(new URL(t.url),f,a,!0,l,d),e.headers.set("Location",l)}return e}function Lt(e,t,n){if(ot.test(e)){let r=e,a=r.startsWith("//")?new URL(t.protocol+r):new URL(r),d=Ge(a.pathname,n)!=null;if(a.origin===t.origin&&d)return a.pathname+a.search+a.hash}return e}function Ee(e,t,n,r){let a=e.createURL($t(t)).toString(),d={signal:n};if(r&&ee(r.formMethod)){let{formMethod:l,formEncType:f}=r;d.method=l.toUpperCase(),f==="application/json"?(d.headers=new Headers({"Content-Type":f}),d.body=JSON.stringify(r.json)):f==="text/plain"?d.body=r.text:f==="application/x-www-form-urlencoded"&&r.formData?d.body=at(r.formData):d.body=r.formData}return new Request(a,d)}function at(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function Mt(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function qr(e,t,n,r,a,d){let l={},f=null,c,b=!1,p={},y=r&&Z(r[1])?r[1].error:void 0;return n.forEach((m,_)=>{let x=t[_].route.id;if(T(!ge(m),"Cannot handle redirect results in processLoaderData"),Z(m)){let R=m.error;y!==void 0&&(R=y,y=void 0),f=f||{};{let M=ze(e,x);f[M.route.id]==null&&(f[M.route.id]=R)}l[x]=void 0,b||(b=!0,c=Bt(m.error)?m.error.status:500),m.headers&&(p[x]=m.headers)}else me(m)?(a.set(x,m.deferredData),l[x]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!b&&(c=m.statusCode),m.headers&&(p[x]=m.headers)):(l[x]=m.data,m.statusCode&&m.statusCode!==200&&!b&&(c=m.statusCode),m.headers&&(p[x]=m.headers))}),y!==void 0&&r&&(f={[r[0]]:y},l[r[0]]=void 0),{loaderData:l,errors:f,statusCode:c||200,loaderHeaders:p}}function Tt(e,t,n,r,a,d,l,f){let{loaderData:c,errors:b}=qr(t,n,r,a,f);for(let p=0;p<d.length;p++){let{key:y,match:m,controller:_}=d[p];T(l!==void 0&&l[p]!==void 0,"Did not find corresponding fetcher result");let x=l[p];if(!(_&&_.signal.aborted))if(Z(x)){let R=ze(e.matches,m==null?void 0:m.route.id);b&&b[R.route.id]||(b=A({},b,{[R.route.id]:x.error})),e.fetchers.delete(y)}else if(ge(x))T(!1,"Unhandled fetcher revalidation redirect");else if(me(x))T(!1,"Unhandled fetcher deferred data");else{let R=fe(x.data);e.fetchers.set(y,R)}}return{loaderData:c,errors:b}}function jt(e,t,n,r){let a=A({},t);for(let d of n){let l=d.route.id;if(t.hasOwnProperty(l)?t[l]!==void 0&&(a[l]=t[l]):e[l]!==void 0&&d.route.loader&&(a[l]=e[l]),r&&r.hasOwnProperty(l))break}return a}function _t(e){return e?Z(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function ze(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function Ft(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Q(e,t){let{pathname:n,routeId:r,method:a,type:d}=t===void 0?{}:t,l="Unknown Server Error",f="Unknown @remix-run/router error";return e===400?(l="Bad Request",a&&n&&r?f="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":d==="defer-action"?f="defer() is not supported in actions":d==="invalid-body"&&(f="Unable to encode submission body")):e===403?(l="Forbidden",f='Route "'+r+'" does not match URL "'+n+'"'):e===404?(l="Not Found",f='No route matches URL "'+n+'"'):e===405&&(l="Method Not Allowed",a&&n&&r?f="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(f='Invalid request method "'+a.toUpperCase()+'"')),new Nt(e||500,l,new Error(f),!0)}function Ct(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(ge(n))return{result:n,idx:t}}}function $t(e){let t=typeof e=="string"?ye(e):e;return Be(A({},t,{hash:""}))}function Qr(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Zr(e){return kt(e.result)&&Nr.has(e.result.status)}function me(e){return e.type===U.deferred}function Z(e){return e.type===U.error}function ge(e){return(e&&e.type)===U.redirect}function en(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function kt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function tn(e){return zr.has(e.toLowerCase())}function ee(e){return Ir.has(e.toLowerCase())}async function At(e,t,n,r,a,d){for(let l=0;l<n.length;l++){let f=n[l],c=t[l];if(!c)continue;let b=e.find(y=>y.route.id===c.route.id),p=b!=null&&!Wt(b,c)&&(d&&d[c.route.id])!==void 0;if(me(f)&&(a||p)){let y=r[l];T(y,"Expected an AbortSignal for revalidating fetcher deferred result"),await Vt(f,y,a).then(m=>{m&&(n[l]=m||n[l])})}}}async function Vt(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:U.data,data:e.deferredData.unwrappedData}}catch(a){return{type:U.error,error:a}}return{type:U.data,data:e.deferredData.data}}}function lt(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function it(e,t){let n=typeof t=="string"?ye(t).search:t.search;if(e[e.length-1].route.index&&lt(n||""))return e[e.length-1];let r=zt(e);return r[r.length-1]}function Ut(e){let{formMethod:t,formAction:n,formEncType:r,text:a,formData:d,json:l}=e;if(!(!t||!n||!r)){if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(d!=null)return{formMethod:t,formAction:n,formEncType:r,formData:d,json:void 0,text:void 0};if(l!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function tt(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function rn(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ue(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function nn(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function fe(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function an(e,t){try{let n=e.sessionStorage.getItem(Kt);if(n){let r=JSON.parse(n);for(let[a,d]of Object.entries(r||{}))d&&Array.isArray(d)&&t.set(a,new Set(d||[]))}}catch{}}function on(e,t){if(t.size>0){let n={};for(let[r,a]of t)n[r]=[...a];try{e.sessionStorage.setItem(Kt,JSON.stringify(n))}catch(r){Pe(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}export{Rt as A,Cr as D,Nt as E,ln as a,T as b,un as c,sn as d,Be as e,Dr as f,Mr as g,Tr as h,Bt as i,Oe as j,cr as k,N as l,Ie as m,ye as p,dn as r,Ge as s};
